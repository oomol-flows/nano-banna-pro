# Nano Banana Pro

**使用 Nano Banana Pro API 生成高质量图像,支持分辨率、纵横比和格式的自定义选项,满足创意工作流程需求。**

[English Documentation](./README.md)

## 概述

Nano Banana Pro 是一个 OOMOL 软件包,提供了易于使用的接口来使用 Nano Banana Pro API 生成 AI 图像。该软件包提供基于 URL 和基于文件的工作流,使您能够将 AI 图像生成无缝集成到创意项目中。

## 功能特性

- **文本生成图像**:使用先进的 AI 模型从文本提示创建图像
- **灵活的输出选项**:
  - 多种宽高比 (21:9, 16:9, 3:2, 4:3, 5:4, 1:1, 4:5, 3:4, 2:3, 9:16)
  - 多种格式 (PNG, JPEG, WebP, JPG)
  - 分辨率选项 (1K, 2K, 4K)
- **两种工作流类型**:
  - **URL 输出**:获取生成图像的直接下载链接
  - **文件输出**:自动将生成的图像保存到本地目录
- **自动轮询**:内置状态检查,等待图像生成完成
- **批量处理**:高效生成和保存多张图像

## 可用模块

### 1. Nano Banana Pro 图像生成器(私有任务块)

向 Nano Banana Pro API 提交图像生成请求。

**输入:**
- `prompt`(必需):描述要生成图像的文本
- `aspectRatio`(可选):输出图像的宽高比(默认:1:1)
- `outputFormat`(可选):图像格式(默认:png)
- `resolution`(可选):图像分辨率(默认:1K)

**输出:**
- `sessionID`:用于跟踪生成过程的唯一会话标识符
- `success`:指示提交是否成功的布尔值

### 2. Nano Banana Pro 结果查询器(私有任务块)

持续轮询 API 以检查图像生成状态,直到完成。

**输入:**
- `sessionID`(必需):来自图像生成器的会话 ID
- `pollingInterval`(可选):状态检查之间的时间间隔(秒),默认:2
- `timeout`(可选):最大等待时间(秒),默认:300

**输出:**
- `images`:生成的图像 URL 数组

### 3. 保存图片(私有任务块)

从 URL 下载图像并将其保存到指定目录。

**输入:**
- `image_url`(必需):要下载的图像 URL
- `save_dir`(可选):图像将保存到的目录路径

**输出:**
- `saved_path`:图像保存的完整路径

### 4. Nano Banana Pro 链接(子流程)

完整的工作流,生成图像并返回下载链接。

**输入:**
- `prompt`(必需):描述要生成图像的文本
- `aspectRatio`(可选):宽高比(默认:16:9)
- `outputFormat`(可选):图像格式(默认:webp)
- `resolution`(可选):图像分辨率(默认:1K)

**输出:**
- `images`:生成的图像 URL 数组

### 5. Nano Banana Pro 文件(子流程)

完整的工作流,生成图像并将其保存为本地文件。

**输入:**
- `prompt`(必需):描述要生成图像的文本
- `save_dir`(可选):图像将保存到的目录
- `aspectRatio`(可选):宽高比(默认:16:9)
- `outputFormat`(可选):图像格式(默认:webp)
- `resolution`(可选):图像分辨率(默认:1K)

**输出:**
- `array`:生成图像保存的文件路径数组

## 使用示例

### 使用 URL 工作流

当您想直接使用图像 URL 或在内存中处理图像时,URL 工作流是理想选择:

1. 将"Nano Banana Pro 链接"子流程添加到您的工作流中
2. 连接文本提示(例如:"一只小脑斧在人的脚边,抬头看着镜头")
3. 可选择配置宽高比、格式和分辨率
4. 工作流将返回一个图像 URL 数组,您可以在后续模块中使用

### 使用文件工作流

当您需要生成图像的本地副本时,文件工作流是完美选择:

1. 将"Nano Banana Pro 文件"子流程添加到您的工作流中
2. 提供描述所需图像的文本提示
3. 指定图像应保存的目录
4. 可选择配置宽高比、格式和分辨率
5. 工作流将返回本地文件路径数组

### 自定义工作流

您还可以使用单独的任务块构建自定义工作流:

1. 使用"Nano Banana Pro 图像生成器"提交请求
2. 将 `sessionID` 传递给"Nano Banana Pro 结果查询器"以轮询结果
3. 可选择使用"保存图片"从返回的 URL 下载图像

## 配置选项

### 宽高比

选择各种宽高比以满足您的创意需求:
- 电影级:21:9
- 宽屏:16:9
- 摄影:3:2, 4:3
- 正方形:1:1
- 人像:4:5, 3:4, 2:3
- 移动端:9:16

### 输出格式

- **PNG**:无损压缩,支持透明度
- **JPEG/JPG**:文件更小,适合照片
- **WebP**:现代格式,出色的压缩效果

### 分辨率

- **1K**:快速生成,适合预览和网页使用
- **2K**:质量和生成时间平衡
- **4K**:最高质量,生成时间较长

## 技术细节

### 架构

该软件包包含:
- **3 个私有任务块**:API 交互和文件操作的核心功能
- **2 个子流程**:常见用例的预配置工作流
- **Python 执行器**:所有任务都使用支持异步的 Python 运行

### 依赖项

软件包通过引导脚本自动安装所有必需的依赖项:
- 通过 Poetry 管理的 Python 包
- 通过 npm 管理的 Node.js 包

### API 集成

- 连接到 Nano Banana Pro 图像生成服务
- 通过 `context.oomol_token()` 使用 OOMOL 令牌认证
- 实现自动重试和超时处理
- 在长时间操作期间提供进度报告

## 最佳实践

1. **从较低分辨率开始**(1K)进行测试和预览
2. **使用描述性提示**以获得更好的图像质量
3. **根据最终用例选择适当的宽高比**
4. **监控超时设置**,高分辨率图像可能需要更长时间
5. **通过使用特定的目录结构组织保存的文件**

## 故障排除

**图像未生成:**
- 检查您的 OOMOL 令牌是否有效
- 验证提示是否足够描述性
- 确保网络连接正常

**超时错误:**
- 增加高分辨率图像的超时值
- 检查 API 服务是否可用

**文件保存错误:**
- 验证保存目录是否存在且具有写入权限
- 确保有足够的磁盘空间

## 代码仓库

[https://github.com/oomol-flows/nano-banna-pro](https://github.com/oomol-flows/nano-banna-pro)

## 版本

0.0.1

## 许可证

许可证信息请参见代码仓库。
